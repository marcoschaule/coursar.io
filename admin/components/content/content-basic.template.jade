//- ****************************************************************************
//- Mixins
//- ****************************************************************************

mixin tableMediaFile()
    table.table.table-striped: tbody
        tr
            td.left  {{ vm.modelContentNew.mediaFile.name }}
            td(width="15%").left
                i.text-danger.fa.fa-times
                |&nbsp;not uploaded yet
            td(width="5%").right: a.btn.btn-xs.btn-danger(
                    data-ng-click="vm.removeMediaFile()")
                i.fa.fa-trash

mixin tableImageFiles
    table.table.table-striped: tbody
        tr(data-ng-repeat="objFile in vm.modelContentNew.imageFiles")
            td.left  {{ objFile.name }}
            td(width="15%").left
                i.text-danger.fa.fa-times
                |&nbsp;not uploaded yet
            td(width="5%").right: a.btn.btn-xs.btn-danger(
                    data-ng-click="vm.removeImageFiles(objFile)")
                i.fa.fa-trash

//- ****************************************************************************
//- Template
//- ****************************************************************************

.wrapper
    h4 Create new basic learning content
    form(name="vm.formContentNew",
            data-ng-submit="vm.createContent()")

        fieldset.form-group.margin-top-2rem
            label(for="content-title") Title:
            input.form-control(id="content-title",
                    type="text",
                    name="contentTitle",
                    alt="Content title to be used to name the content",
                    placeholder="Title",
                    data-ng-required="true",
                    data-ng-model="vm.modelContentNew.title")

        fieldset.form-group
            label(for="content-name") Name:
            input.form-control(id="content-name",
                    type="text",
                    name="contentName",
                    alt="Content name to be used to identify the content",
                    placeholder="Name",
                    data-ng-required="true",
                    data-ng-model="vm.modelContentNew.name")

        hr

        fieldset.form-group.margin-top-2rem
            label.border-bottom(for="content-media-file")
                |Video or audio files:
            .left(data-ng-if="vm.modelContentNew.mediaFile.name")
                .video-placeholder
                    i.white.fa.fa-5x.fa-play-circle-o
                    p.
                        File <strong>{{ vm.modelContentNew.mediaFile.name }}</strong>
                        not uploaded, yet.

            .left
                a.btn.btn-default(
                        id="content-media-file",
                        name="mediaFile",
                        accept="audio/*,video/*",
                        data-ng-model="vm.modelContentNew.mediaFile",
                        data-ngf-select="",
                        data-ngf-pattern="'audio/*,video/*'")
                    |Select video or audio file for upload
                |&nbsp;
                a.btn.btn-danger(
                        data-ng-if="vm.modelContentNew.mediaFile", 
                        data-ng-click="vm.removeMediaFile('all')")
                    |Remove file from upload

            .vmargin-1rem
            //- video#video(width="320", height="240", controls)
            //-     source#video-source(src="{{vm.modelContent.mediaFile.filename}}", type="video/mp4")
            .left(data-ng-if="vm.modelContent.mediaFile.filename")
                videogular(
                        data-vg-player-ready='vm.ready($API)',
                        data-vg-update-state="vm.test($state)",
                        data-vg-theme='vm.objConfigVideo.theme.url')
                    vg-media(
                            data-vg-src='vm.objConfigVideo.sources',
                            data-vg-tracks='vm.objConfigVideo.tracks')
                    vg-controls
                        vg-play-pause-button
                        vg-time-display {{ currentTime | date:'mm:ss' }}
                        vg-scrub-bar
                            vg-scrub-bar-current-time
                        vg-time-display {{ timeLeft | date:'mm:ss' }}
                        vg-volume
                            vg-mute-button
                            vg-volume-bar
                        vg-fullscreen-button
                    vg-overlay-play
                    vg-buffering

        fieldset.form-group.margin-top-2rem
            label(for="content-text") Text:
            textarea.code-mirror.form-control(
                    id="content-text",
                    name="contentText",
                    type="text",
                    rows="12",
                    alt="Content text as the basic content",
                    data-ng-model="vm.modelContentNew.text")
        
        fieldset.form-group.margin-top-2rem
            label.border-bottom(for="content-image-files")
                |Image files:
            .file-upload-not-available(
                    data-ngf-no-file-drop="")
                |File Drag/Drop is not supported for this browser
            .files-list(data-ng-if="vm.modelContentNew.imageFiles.length > 0")
                +tableImageFiles
            .left
                a.btn.btn-default(
                        id="content-image-files",
                        accept="image/*",
                        data-ng-model="vm.modelContentNew.imageFiles",
                        data-ngf-select="",
                        data-ngf-multiple="true",
                        data-ngf-pattern="'image/*'")
                    |Select image files for upload
                |&nbsp;
                a.btn.btn-danger(
                        data-ng-if="vm.modelContentNew.imageFiles.length > 0", 
                        data-ng-click="vm.removeImageFiles('all')")
                    |Remove all files from upload

        fieldset.form-group.margin-top-2rem
            button.btn.btn-primary(
                    data-ng-disabled="vm.formContentNew.$invalid")
                |Create